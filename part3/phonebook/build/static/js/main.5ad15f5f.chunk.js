(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(13),r=t.n(a),c=t(0),o=t.n(c),u=t(14),l=t(2),i=t(3),m=t.n(i),f="/api/persons",d=function(){return m.a.get(f).then((function(e){return e.data}))},s=function(e){return m.a.post(f,e).then((function(e){return e.data}))},h=function(e,n){return m.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return m.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var n=e.value,t=e.eventHandler;return o.a.createElement("div",null,"filter shown with: ",o.a.createElement("input",{value:n,onChange:t}))},b=function(e){var n=e.newNameValue,t=e.newNameInput,a=e.newPhoneValue,r=e.newPhoneInput,c=e.newPersonHandler;return o.a.createElement("form",null,o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:n,onChange:t}),o.a.createElement("br",null),"number: ",o.a.createElement("input",{value:a,onChange:r})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",onClick:c},"add")))},E=function(e){var n=e.message;return null===n?null:o.a.createElement("div",{className:"notification"},n)},w=function(e){var n=e.message;return null===n?null:o.a.createElement("div",{className:"error"},n)},j=function(e){var n=e.filteredPersonsArray,t=e.handleDelete;return o.a.createElement("div",null,n.map((function(e){return o.a.createElement("div",{key:e.name},e.name," ",e.phone,o.a.createElement("button",{onClick:function(){return t(e)}},"Delete"))})))},O=function(){var e=Object(c.useState)([]),n=Object(l.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),m=i[0],f=i[1],O=Object(c.useState)(""),g=Object(l.a)(O,2),P=g[0],k=g[1],y=Object(c.useState)(""),C=Object(l.a)(y,2),N=C[0],S=C[1],D=Object(c.useState)(null),I=Object(l.a)(D,2),A=I[0],H=I[1],V=Object(c.useState)(null),J=Object(l.a)(V,2),L=J[0],x=J[1],B=Object(c.useState)(t),F=Object(l.a)(B,2),T=F[0],U=F[1];Object(c.useEffect)((function(){d().then((function(e){a(e),U(e)}))}),[]);var q=function(e,n){n?x(e):H(e),setTimeout((function(){H(null)}),5e3)};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(E,{message:A}),o.a.createElement(w,{message:L}),o.a.createElement(p,{value:N,eventHandler:function(e){var n=e.target.value;S(n);var a=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));U(a)}}),o.a.createElement("h3",null,"Add a new"),o.a.createElement(b,{newNameValue:m,newNameInput:function(e){f(e.target.value)},newPhoneValue:P,newPhoneInput:function(e){k(e.target.value)},newPersonHandler:function(e){if(e.preventDefault(),""!==m&&""!==P){for(var n=function(e){if(t[e].name===m){if(window.confirm("".concat(m," is already added to the phonebook, replace the old number with the new one?"))){var n=Object(u.a)({},t[e],{phone:P});h(t[e].id,n).then((function(n){t[e]=n,a(t),U(t),S(""),f(""),k(""),q("Updated ".concat(m,"'s phone number to ").concat(P),!1)})).catch((function(e){q("".concat(e.response.data.error),!0)}))}return{v:void 0}}},r=0;r<t.length;r++){var c=n(r);if("object"===typeof c)return c.v}s({name:m,phone:P}).then((function(e){a(t.concat(e)),U(t.concat(e)),S(""),f(""),k(""),q("Added person ".concat(e.name),!1)})).catch((function(e){q("".concat(e.response.data.error),!0)}))}else window.alert("Please enter a name and a number!")}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(j,{filteredPersonsArray:T,handleDelete:function(e){v(e.id).then((function(n){var r=t.filter((function(n){return n.id!==e.id}));a(r),U(r),S(""),f(""),k(""),q("Deleted ".concat(e.name),!1)})).catch((function(n){q("Failed to delete ".concat(e.name," with ID ").concat(e.id,"."),!0)}))}}))};t(37);r.a.render(o.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.5ad15f5f.chunk.js.map